- name: setup chatwithgpt app in k3s 
  hosts: all
  user: root
  become: yes
  gather_facts: yes
  tasks:
    - include_role:
        name: cert-manager
      vars:
        group: master
        namespace: default
        domain: onwalk.net
        auto_issuance: true
        update_secret: true
        secret: default-tls
        key_file: '/etc/ssl/onwalk.net.key'
        cert_file: '/etc/ssl/onwalk.net.cert'
    - include_role:
        name: cert-manager
      vars:
        group: master
        namespace: harbor
        domain: onwalk.net
        auto_issuance: true
        update_secret: true
        secret: harbor-tls
        key_file: '/etc/ssl/onwalk.net.key'
        cert_file: '/etc/ssl/onwalk.net.pem'
