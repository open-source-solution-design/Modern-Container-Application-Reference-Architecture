- name: setup gitlab 
  hosts: all
  user: root
  become: yes
  gather_facts: yes
  tasks:
    - include_role:
        name: gitlab
      vars:
        group: master
        namespace: gitlab
        db_namespace: database
        domain: apollo-ev.com
        auto_issuance: false
        update_secret: true  
        tls:
          - secret_name: gitlab-tls
            keyfile: /etc/ssl/apollo-ev.com.key
            certfile: /etc/ssl/apollo-ev.com.pem
        gitlab_oidc_client_id: code_oidc
        gitlab_oidc_isser: 'https://keycloak.apollo-ev.com/realms/cloud-sso'
        gitlab_oidc_redirect_uri: 'https://code.apollo-ev.com/users/auth/openid_connect/callback'
